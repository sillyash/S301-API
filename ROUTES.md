# Routes

## Table of contents

- [GET - To retrieve data from the database](#get---to-retrieve-data-from-the-database)
- [POST - To create a new row in the database](#post---to-create-a-new-row-in-the-database)
  - [Usage](#usage)
  - [Example](#example)
- [PUT - To update a row in the database](#put---to-update-a-row-in-the-database)
  - [Usage](#usage-1)
  - [Example](#example-1)
- [DELETE - To delete a row in the database](#delete---to-delete-a-row-in-the-database)
  - [Usage](#usage-2)
  - [Example](#example-2)

- `/` : returns the list of all the routes

## GET - To retrieve data from the database

> [!NOTE]  
> Arguments for GET requests should be passed in the URL as query parameters.

- `/test/env` : returns the environment variables and PHP constants (useful for debugging)
- `/table/[tableName]` : returns data from the database
  - `?rows=[number]` : limits the number of rows returned
  - `?orderby=[column name]` : orders the rows by the specified column
  - `?desc=true` : orders the rows in descending order
- `/[tableName]` : returns an row from the table
  - `?[key1]=[val1]`
  - `?[key2]=[val2]`
  - `...` : to identify the row


## POST - To create a new row in the database

> [!NOTE]  
> Arguments for POST requests should be passed in the `php://input` stream as JSON.

### Usage

- `/[tableName]` : creates a new row in the table
  - Arguments: 
  ```json
  {
    "arg1": "val1",
    "arg2": "val2",
    "arg3": "val3",
    "..."
  }
  ```

Only the arguments that are required need to be passed (`NOT NULL` in the db).

Avoid passing generated values (e.g. `id` or `created_at`), as they will be generated by the database.

Other arguments will be set.

### Example

- `/Proposition` : inserts a Proposition in the database
  - Arguments: 
  ```json
  {
    "title": "Title of the new proposition",
    "description": "Description of the new proposition"
  }
  ```


## PUT - To update a row in the database

> [!NOTE]  
> Arguments for PUT requests should be passed in the `php://input` stream as JSON.

### Usage

- `/[tableName]` : updates a row in the table
  - Arguments: 
  ```json
  {
    "id": "id of the row to update",
    "arg1": "new val1",
    "arg2": "new val2",
    "arg3": "new val3",
    "..."
  }
  ```

### Example

- `/Role` : updates a Role in the database
  - Arguments: 
  ```json
  {
    "idRole": "id of the Role to update",
    "nomRole": "new name of the Role"
  }
  ```


## DELETE - To delete a row in the database

> [!NOTE]  
> Arguments for GET requests should be passed in the URL as query parameters.

### Usage

- `/[tableName]` : deletes a row in the table
  - `?[key1]=[val1]`
  - `?[key2]=[val2]`
  - `...` : to identify the row

### Example

- `/Theme` : deletes a Theme in the database
  - `?idTheme=[id of the Theme to delete]`

<br>

[Back to top](#routes)
